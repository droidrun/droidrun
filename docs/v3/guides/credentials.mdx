---
title: Credentials
description: Securely manage and use credentials in DroidRun via placeholders, files, and environment variables.
---

# Credentials

DroidRun lets you securely use secrets without exposing them in prompts, agent reasoning, logs, or telemetry.

- Secrets are referenced by placeholders like `{{API_TOKEN}}`.
- They are resolved only at tool-execution time by the `CredentialManager`.
- All logs and telemetry go through a redactor that replaces known values with placeholders.

## Sources

The `CredentialManager` merges secrets from multiple sources (later ones override earlier ones):

1. File `~/.droidrun/credentials.json` (or `--credentials-file`)
2. `DROIDRUN_CREDENTIALS_JSON` (JSON string)
3. Flat env vars `DROIDRUN_CREDENTIALS_*`
4. Explicit dict passed programmatically

### Profiles

If your JSON is an object of objects, the top-level keys are treated as profiles:

```json
{
  "default": {
    "USER_NAME": "alice",
    "PASSWORD": "s3cr3t",
    "API_TOKEN": "tok_abc123"
  },
  "work": {
    "API_TOKEN": "tok_work_456"
  }
}
```

Select a profile via `--credentials-profile work` or `DROIDRUN_CREDENTIALS_PROFILE=work`.

### Flat env vars

Set individual secrets with `DROIDRUN_CREDENTIALS_*`:

```
export DROIDRUN_CREDENTIALS_USER_NAME=alice
export DROIDRUN_CREDENTIALS_PASSWORD=s3cr3t
export DROIDRUN_CREDENTIALS_API_TOKEN=tok_abc123
```

### JSON env var

```
export DROIDRUN_CREDENTIALS_JSON='{"USER_NAME":"alice","PASSWORD":"s3cr3t"}'
```

## CLI usage

All commands accept the following options:

- `--credentials-file` Path to a credentials JSON file
- `--credentials-profile` Profile name in the credentials file/JSON

Example:

```
droidrun run "login to the app" \
  --credentials-file ~/.droidrun/credentials.json \
  --credentials-profile work
```

## Placeholders

Placeholders are `{{UPPER_SNAKE_CASE}}` identifiers. Use them anywhere in tool parameters:

```json
{
  "tool": "fill_credentials",
  "params": {
    "username": "{{USER_NAME}}",
    "password": "{{PASSWORD}}"
  }
}
```

Or through the helper exposed to the agent:

```python
# inside agent-executed code
creds = fill_credentials(username="{{USER_NAME}}", password="{{PASSWORD}}")
input_text(creds["username"])  # resolved value at call-time
```

Resolution happens only when executing the tool call. The agent continues to see placeholders in its context.

## Security and redaction

- The CLI installs a log filter that redacts secrets in all `droidrun` logs.
- Telemetry events are redacted before sending.
- The Python executor output is redacted before returning.

No secret values are printed or captured in prompts/telemetry when configured.

## Troubleshooting

- If placeholders do not resolve, verify the key names (they must be upper-case) and that sources are loaded.
- Use `--credentials-profile` to ensure the intended profile is active.
- Enable debug logs with `--debug` to see key-only diagnostics from `CredentialManager`.
